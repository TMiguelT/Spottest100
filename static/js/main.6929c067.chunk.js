(this["webpackJsonpspottest-100"]=this["webpackJsonpspottest-100"]||[]).push([[0],{106:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),o=a.n(l),i=(a(97),a(12)),c=(a(98),a(59)),s=a(31),u=a(71),m=a.n(u),f=a(184),h=a(169),g=a(63),E=a(168),d=a(165),b=a(166),p=a(167),y=a(193),v=a(163),w=a(162),j=a(164);function O(e){var t=e.handleClose,a=e.open;return r.a.createElement(y.a,{onClose:t,open:a},r.a.createElement(w.a,null,"About Spottest 100"),r.a.createElement(v.a,null,r.a.createElement(g.a,{variant:"body1",gutterBottom:!0},"Spottest 100 is a ",r.a.createElement(j.a,{href:"https://en.wikipedia.org/wiki/Free_and_open-source_software"},"free and open source")," web application designed to simplify the process of choosing your top 10 songs for the year for triple j's annual ",r.a.createElement(j.a,{href:"https://www.abc.net.au/triplej/hottest100"},"Hottest 100")," music poll."),r.a.createElement(g.a,{variant:"body1",gutterBottom:!0},"This application works by using the Spotify ",r.a.createElement(j.a,{href:"https://developer.spotify.com/documentation/web-api/"},"Web API")," to request your most listened songs, and then by filtering them down to only songs eligible for this year's Hottest 100."),r.a.createElement(g.a,{variant:"body1"},"Unfortunately, the only information Spotify is willing to provide about your library is three lists of 50 songs:",r.a.createElement("ul",null,r.a.createElement("li",null,"Long term: your favourite songs of all time"),r.a.createElement("li",null,"Medium term: your favourite songs from the past 6 months"),r.a.createElement("li",null,"Short term: your favourite songs from the past 4 weeks")),"Spottest 100 provides these three lists (filtered down to eligible songs), along with one\xa0",r.a.createElement("em",null,"combined"),"\xa0list, which combines the three lists, putting long-term favourites before medium-term favourites, before short-term favourites, because songs you have listened to for a longer period of time are more likely to be your favourite songs of the year.")))}function k(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],l=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{handleClose:function(){l(!1)},open:a}),r.a.createElement(d.a,{position:"static"},r.a.createElement(b.a,null,r.a.createElement(g.a,{style:{flex:1},variant:"h6"},"Spottest 100"),r.a.createElement(p.a,{size:"large",color:"inherit",onClick:function(){l(!0)}},"About"),r.a.createElement(p.a,{size:"large",color:"inherit",target:"_blank",href:"https://github.com/TMiguelT/Spottest100"},"Source Code"),r.a.createElement(p.a,{size:"large",color:"inherit",target:"_blank",href:"https://github.com/TMiguelT/Spottest100/issues"},"Report an Issue"))))}function S(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k,null),r.a.createElement(E.a,{maxWidth:"md"},r.a.createElement(h.a,{container:!0,justify:"center"},r.a.createElement(h.a,{item:!0,style:{textAlign:"center"}},r.a.createElement(g.a,{variant:"h2"},"Spottest 100"),r.a.createElement(g.a,{variant:"subtitle1"},"A calculator for your triple j Hottest 100 votes, using your music library"),t))))}var _=a(186);function T(e){var t=e.loginUrl;return r.a.createElement(_.a,{mt:"20px"},r.a.createElement(h.a,{container:!0,justify:"center"},r.a.createElement(h.a,{item:!0,md:6},r.a.createElement(p.a,{fullWidth:!0,variant:"contained",size:"large",color:"primary",href:t},"Login with Spotify"))))}var C=a(171),x=a(175),W=a(174),A=a(183),F=a(192),P=a(172),U=a(173),L=a(176),M=a(107),q=a(190),z=a(196),D=a(180),H=a(181),I=a(182),B=a(188),R=a(195),Y=a(189),J=a(60),$=a.n(J);function G(e,t){var a=new Date(e.album.release_date),n=function(e){return[new Date(e-1,11,1),new Date(e,11,1)]}(t),r=Object(i.a)(n,2),l=r[0],o=r[1];return a>=l&&a<o}function K(e){var t,a=e.homeUrl,l=e.longTerm,o=e.mediumTerm,c=e.shortTerm,s=Object(n.useState)(0),u=Object(i.a)(s,2),m=u[0],f=u[1],g=Object(n.useState)(!1),E=Object(i.a)(g,2),d=E[0],b=E[1],y=Object(n.useState)(0),v=Object(i.a)(y,2),w=v[0],O=v[1],k=function(e){var t=new Date(e.getFullYear(),0,28,3);return e<t?e.getFullYear()-1:e.getFullYear()}(new Date),S=Object(n.useState)(k),T=Object(i.a)(S,2),J=T[0],K=T[1],N=Object(n.useMemo)((function(){var e;switch(w){case 0:e=$()(l.concat(o,c).filter((function(e){return G(e,J)})),"id");break;case 1:e=l.filter((function(e){return G(e,J)}));break;case 2:e=o.filter((function(e){return G(e,J)}));break;case 3:e=c.filter((function(e){return G(e,J)}))}return d?$()(e,(function(e){return e.artists[0].name})):e}),[c,o,l,J,d,w]);return t=0===N.length?r.a.createElement(B.a,{severity:"info"},"Spotify can't find any eligible tracks for the chosen year, over this listening period"):r.a.createElement(C.a,{style:{tableLayout:"fixed"}},r.a.createElement(P.a,null,r.a.createElement(U.a,null,r.a.createElement(W.a,{style:{width:"10%"}},"Rank"),r.a.createElement(W.a,{style:{width:"45%"}},"Song"),r.a.createElement(W.a,{style:{width:"45%"}},"Artists"))),r.a.createElement(x.a,null,N.slice(10*m,10*m+10).map((function(e,t){return r.a.createElement(U.a,null,r.a.createElement(W.a,null,10*m+t+1),r.a.createElement(W.a,null,r.a.createElement(j.a,{href:e.external_urls.spotify,target:"_blank"},e.name)),r.a.createElement(W.a,null,e.artists.map((function(e,t,a){var n=[r.a.createElement(j.a,{href:e.external_urls.spotify,target:"_blank"},e.name)];return t<a.length-1&&n.push(r.a.createElement("span",null,", ")),r.a.createElement(r.a.Fragment,null,n)}))))}))),r.a.createElement(L.a,null,r.a.createElement(U.a,null,r.a.createElement(F.a,{page:m,count:N.length,onChangePage:function(e,t){f(t)},rowsPerPage:10,rowsPerPageOptions:[10]})))),r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{my:"20px"},r.a.createElement(h.a,{container:!0,justify:"center"},r.a.createElement(h.a,{item:!0,md:6},r.a.createElement(p.a,{fullWidth:!0,variant:"contained",size:"large",color:"primary",href:a},"Logout")))),r.a.createElement(M.a,null,r.a.createElement(h.a,{container:!0,justify:"center"},r.a.createElement(h.a,{item:!0},r.a.createElement(D.a,{row:!0,style:{alignItems:"flex-end"}},r.a.createElement(R.a,{title:"e.g. the Hottest 100 for 2018 was held in January 2019","aria-label":"add"},r.a.createElement(q.a,{margin:"dense",label:"Year",type:"number",value:J,onChange:function(e){K(e.target.value)}})),r.a.createElement(R.a,{title:"Only choose your favourite song from each artist","aria-label":"add"},r.a.createElement(H.a,{style:{marginLeft:"1em"},control:r.a.createElement(z.a,{checked:d,onChange:function(e){b(e.target.checked)}}),label:"Unique Artists"}))))),r.a.createElement(Y.a,{variant:"fullWidth",value:w,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){O(t),f(0)}},r.a.createElement(R.a,{title:"All of your favourites in sorted order"},r.a.createElement(I.a,{label:"Combined"})),r.a.createElement(R.a,{title:"Only songs that are your all-time favourites"},r.a.createElement(I.a,{label:"Long Term"})),r.a.createElement(R.a,{title:"What you have been listening to for the last 6 months"},r.a.createElement(I.a,{label:"Medium Term"})),r.a.createElement(R.a,{title:"What you have been listening to for the last 4 weeks"},r.a.createElement(I.a,{label:"Short Term"}))),r.a.createElement(A.a,{component:M.a},t)))}var N=window.location.origin+window.location.pathname,Q=c.Client.instance;Q.settings={clientId:"9c91bacd3cc149c4ac198f88b2468719",scopes:["user-top-read"],redirect_uri:N};var V=function(){var e=Object(s.d)(),t=Object(n.useMemo)((function(){return m.a.parse(e.hash.substring(1))}),[e.hash]);Q.token=t.access_token;var a,l=Object(n.useState)(null),o=Object(i.a)(l,2),u=o[0],h=o[1],g=Object(n.useState)("notRequested"),E=Object(i.a)(g,2),d=E[0],b=E[1],p=Object(n.useState)([]),y=Object(i.a)(p,2),v=y[0],w=y[1],j=Object(n.useState)([]),O=Object(i.a)(j,2),k=O[0],_=O[1],C=Object(n.useState)([]),x=Object(i.a)(C,2),W=x[0],A=x[1];return Object(n.useEffect)((function(){"access_token"in t||Q.login().then((function(e){h(e)}))}),[t]),Object(n.useEffect)((function(){"notRequested"===d&&"access_token"in t&&(b("requested"),(new c.UserHandler).me().then((function(e){return Promise.all(["short_term","medium_term","long_term"].map((function(t){return e.top("tracks",{time_range:t,limit:50})})))})).then((function(e){var t=Object(i.a)(e,3),a=t[0],n=t[1],r=t[2];b("retrieved"),w(a),_(n),A(r)})).catch((function(e){window.location.replace(N)})))}),[d,t,t.access_token]),a="retrieved"===d?r.a.createElement(K,{homeUrl:N,shortTerm:v,mediumTerm:k,longTerm:W}):"access_token"in t?r.a.createElement(f.a,null):r.a.createElement(T,{loginUrl:u}),r.a.createElement(S,null,a)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=a(58),Z=a(194);o.a.render(r.a.createElement(X.a,null,r.a.createElement(Z.a,null,r.a.createElement(V,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},92:function(e,t,a){e.exports=a(106)},97:function(e,t,a){},98:function(e,t,a){}},[[92,1,2]]]);
//# sourceMappingURL=main.6929c067.chunk.js.map